(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/core'), require('@angular/platform-browser'), require('angulartics2')) :
    typeof define === 'function' && define.amd ? define('angulartics2/clicky', ['exports', '@angular/core', '@angular/platform-browser', 'angulartics2'], factory) :
    (factory((global.angulartics2 = global.angulartics2 || {}, global.angulartics2.clicky = {}),global.ng.core,global.ng.platformBrowser,global.angulartics2));
}(this, (function (exports,core,platformBrowser,angulartics2) { 'use strict';

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var Angulartics2Clicky = (function () {
        function Angulartics2Clicky(angulartics2$$1, titleService) {
            var _this = this;
            this.angulartics2 = angulartics2$$1;
            this.titleService = titleService;
            if (typeof clicky === 'undefined') {
                console.warn('Angulartics 2 Clicky Plugin: clicky global not found');
            }
            this.angulartics2.pageTrack
                .pipe(this.angulartics2.filterDeveloperMode())
                .subscribe(function (x) { return _this.pageTrack(x.path); });
            this.angulartics2.eventTrack
                .pipe(this.angulartics2.filterDeveloperMode())
                .subscribe(function (x) { return _this.eventOrGoalTrack(x.action, x.properties); });
        }
        /**
         * Track Page in Clicky
         *
         * @param path location
         *
         * @link https://clicky.com/help/custom/manual#log
         */
        /**
         * Track Page in Clicky
         *
         * @link https://clicky.com/help/custom/manual#log
         * @param {?} path location
         *
         * @return {?}
         */
        Angulartics2Clicky.prototype.pageTrack = /**
         * Track Page in Clicky
         *
         * @link https://clicky.com/help/custom/manual#log
         * @param {?} path location
         *
         * @return {?}
         */
            function (path) {
                var /** @type {?} */ title = this.titleService.getTitle();
                clicky.log(path, title, 'pageview');
            };
        /**
         * Track Event Or Goal in Clicky
         *
         * @param action Action name
         * @param properties Definition of 'properties.goal' determines goal vs event tracking
         *
         * @link https://clicky.com/help/custom/manual#log
         * @link https://clicky.com/help/custom/manual#goal
         */
        /**
         * Track Event Or Goal in Clicky
         *
         * @link https://clicky.com/help/custom/manual#log
         * @link https://clicky.com/help/custom/manual#goal
         * @param {?} action Action name
         * @param {?} properties Definition of 'properties.goal' determines goal vs event tracking
         *
         * @return {?}
         */
        Angulartics2Clicky.prototype.eventOrGoalTrack = /**
         * Track Event Or Goal in Clicky
         *
         * @link https://clicky.com/help/custom/manual#log
         * @link https://clicky.com/help/custom/manual#goal
         * @param {?} action Action name
         * @param {?} properties Definition of 'properties.goal' determines goal vs event tracking
         *
         * @return {?}
         */
            function (action, properties) {
                if (typeof properties.goal === 'undefined') {
                    var /** @type {?} */ title = properties.title || null;
                    var /** @type {?} */ type = properties.type != null ? this.validateType(properties.type) : null;
                    clicky.log(action, title, type);
                }
                else {
                    var /** @type {?} */ goalId = properties.goal;
                    var /** @type {?} */ revenue = properties.revenue;
                    clicky.goal(goalId, revenue, !!properties.noQueue);
                }
            };
        /**
         * @param {?} type
         * @return {?}
         */
        Angulartics2Clicky.prototype.validateType = /**
         * @param {?} type
         * @return {?}
         */
            function (type) {
                var /** @type {?} */ EventType = ['pageview', 'click', 'download', 'outbound'];
                return EventType.indexOf(type) > -1 ? type : 'pageview';
            };
        Angulartics2Clicky.decorators = [
            { type: core.Injectable }
        ];
        /** @nocollapse */
        Angulartics2Clicky.ctorParameters = function () {
            return [
                { type: angulartics2.Angulartics2 },
                { type: platformBrowser.Title }
            ];
        };
        return Angulartics2Clicky;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */

    exports.Angulartics2Clicky = Angulartics2Clicky;

    Object.defineProperty(exports, '__esModule', { value: true });

})));

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW5ndWxhcnRpY3MyLWNsaWNreS51bWQuanMubWFwIiwic291cmNlcyI6WyJuZzovL2FuZ3VsYXJ0aWNzMi9jbGlja3kvY2xpY2t5LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFRpdGxlIH0gZnJvbSAnQGFuZ3VsYXIvcGxhdGZvcm0tYnJvd3Nlcic7XG5cbmltcG9ydCB7IEFuZ3VsYXJ0aWNzMiB9IGZyb20gJ2FuZ3VsYXJ0aWNzMic7XG5pbXBvcnQgeyBDbGlja3lQcm9wZXJ0aWVzIH0gZnJvbSAnLi9jbGlja3kuaW50ZXJmYWNlcyc7XG5cbmRlY2xhcmUgdmFyIGNsaWNreTogYW55O1xuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgQW5ndWxhcnRpY3MyQ2xpY2t5IHtcbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBhbmd1bGFydGljczI6IEFuZ3VsYXJ0aWNzMixcbiAgICBwcml2YXRlIHRpdGxlU2VydmljZTogVGl0bGUsXG4gICkge1xuICAgIGlmICh0eXBlb2YgY2xpY2t5ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgY29uc29sZS53YXJuKCdBbmd1bGFydGljcyAyIENsaWNreSBQbHVnaW46IGNsaWNreSBnbG9iYWwgbm90IGZvdW5kJyk7XG4gICAgfVxuICAgIHRoaXMuYW5ndWxhcnRpY3MyLnBhZ2VUcmFja1xuICAgICAgLnBpcGUodGhpcy5hbmd1bGFydGljczIuZmlsdGVyRGV2ZWxvcGVyTW9kZSgpKVxuICAgICAgLnN1YnNjcmliZSgoeCkgPT4gdGhpcy5wYWdlVHJhY2soeC5wYXRoKSk7XG4gICAgdGhpcy5hbmd1bGFydGljczIuZXZlbnRUcmFja1xuICAgICAgLnBpcGUodGhpcy5hbmd1bGFydGljczIuZmlsdGVyRGV2ZWxvcGVyTW9kZSgpKVxuICAgICAgLnN1YnNjcmliZSgoeCkgPT4gdGhpcy5ldmVudE9yR29hbFRyYWNrKHguYWN0aW9uLCB4LnByb3BlcnRpZXMpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmFjayBQYWdlIGluIENsaWNreVxuICAgKlxuICAgKiBAcGFyYW0gcGF0aCBsb2NhdGlvblxuICAgKlxuICAgKiBAbGluayBodHRwczovL2NsaWNreS5jb20vaGVscC9jdXN0b20vbWFudWFsI2xvZ1xuICAgKi9cbiAgcGFnZVRyYWNrKHBhdGg6IHN0cmluZykge1xuICAgIGNvbnN0IHRpdGxlOiBzdHJpbmcgPSB0aGlzLnRpdGxlU2VydmljZS5nZXRUaXRsZSgpO1xuICAgIGNsaWNreS5sb2cocGF0aCwgdGl0bGUsICdwYWdldmlldycpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRyYWNrIEV2ZW50IE9yIEdvYWwgaW4gQ2xpY2t5XG4gICAqXG4gICAqIEBwYXJhbSBhY3Rpb24gQWN0aW9uIG5hbWVcbiAgICogQHBhcmFtIHByb3BlcnRpZXMgRGVmaW5pdGlvbiBvZiAncHJvcGVydGllcy5nb2FsJyBkZXRlcm1pbmVzIGdvYWwgdnMgZXZlbnQgdHJhY2tpbmdcbiAgICpcbiAgICogQGxpbmsgaHR0cHM6Ly9jbGlja3kuY29tL2hlbHAvY3VzdG9tL21hbnVhbCNsb2dcbiAgICogQGxpbmsgaHR0cHM6Ly9jbGlja3kuY29tL2hlbHAvY3VzdG9tL21hbnVhbCNnb2FsXG4gICAqL1xuICBldmVudE9yR29hbFRyYWNrKGFjdGlvbjogc3RyaW5nLCBwcm9wZXJ0aWVzOiBQYXJ0aWFsPENsaWNreVByb3BlcnRpZXM+KSB7XG4gICAgaWYgKHR5cGVvZiBwcm9wZXJ0aWVzLmdvYWwgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjb25zdCB0aXRsZTogc3RyaW5nID0gcHJvcGVydGllcy50aXRsZSB8fCBudWxsO1xuICAgICAgY29uc3QgdHlwZTogc3RyaW5nID0gcHJvcGVydGllcy50eXBlICE9IG51bGwgPyB0aGlzLnZhbGlkYXRlVHlwZShwcm9wZXJ0aWVzLnR5cGUpIDogbnVsbDtcbiAgICAgIGNsaWNreS5sb2coYWN0aW9uLCB0aXRsZSwgdHlwZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGdvYWxJZDogc3RyaW5nID0gcHJvcGVydGllcy5nb2FsO1xuICAgICAgY29uc3QgcmV2ZW51ZTogbnVtYmVyID0gcHJvcGVydGllcy5yZXZlbnVlO1xuICAgICAgY2xpY2t5LmdvYWwoZ29hbElkLCByZXZlbnVlLCAhIXByb3BlcnRpZXMubm9RdWV1ZSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSB2YWxpZGF0ZVR5cGUodHlwZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBFdmVudFR5cGUgPSBbJ3BhZ2V2aWV3JywgJ2NsaWNrJywgJ2Rvd25sb2FkJywgJ291dGJvdW5kJ107XG4gICAgcmV0dXJuIEV2ZW50VHlwZS5pbmRleE9mKHR5cGUpID4gLTEgPyB0eXBlIDogJ3BhZ2V2aWV3JztcbiAgfVxufVxuIl0sIm5hbWVzIjpbImFuZ3VsYXJ0aWNzMiIsIkluamVjdGFibGUiLCJBbmd1bGFydGljczIiLCJUaXRsZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBO1FBVUUsNEJBQ1VBLGlCQUNBO1lBRlYsaUJBYUM7WUFaUyxpQkFBWSxHQUFaQSxlQUFZO1lBQ1osaUJBQVksR0FBWixZQUFZO1lBRXBCLElBQUksT0FBTyxNQUFNLEtBQUssV0FBVyxFQUFFO2dCQUNqQyxPQUFPLENBQUMsSUFBSSxDQUFDLHNEQUFzRCxDQUFDLENBQUM7YUFDdEU7WUFDRCxJQUFJLENBQUMsWUFBWSxDQUFDLFNBQVM7aUJBQ3hCLElBQUksQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLG1CQUFtQixFQUFFLENBQUM7aUJBQzdDLFNBQVMsQ0FBQyxVQUFDLENBQUMsSUFBSyxPQUFBLEtBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFBLENBQUMsQ0FBQztZQUM1QyxJQUFJLENBQUMsWUFBWSxDQUFDLFVBQVU7aUJBQ3pCLElBQUksQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLG1CQUFtQixFQUFFLENBQUM7aUJBQzdDLFNBQVMsQ0FBQyxVQUFDLENBQUMsSUFBSyxPQUFBLEtBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxVQUFVLENBQUMsR0FBQSxDQUFDLENBQUM7U0FDcEU7Ozs7Ozs7Ozs7Ozs7Ozs7UUFTRCxzQ0FBUzs7Ozs7Ozs7WUFBVCxVQUFVLElBQVk7Z0JBQ3BCLHFCQUFNLEtBQUssR0FBVyxJQUFJLENBQUMsWUFBWSxDQUFDLFFBQVEsRUFBRSxDQUFDO2dCQUNuRCxNQUFNLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxLQUFLLEVBQUUsVUFBVSxDQUFDLENBQUM7YUFDckM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O1FBV0QsNkNBQWdCOzs7Ozs7Ozs7O1lBQWhCLFVBQWlCLE1BQWMsRUFBRSxVQUFxQztnQkFDcEUsSUFBSSxPQUFPLFVBQVUsQ0FBQyxJQUFJLEtBQUssV0FBVyxFQUFFO29CQUMxQyxxQkFBTSxLQUFLLEdBQVcsVUFBVSxDQUFDLEtBQUssSUFBSSxJQUFJLENBQUM7b0JBQy9DLHFCQUFNLElBQUksR0FBVyxVQUFVLENBQUMsSUFBSSxJQUFJLElBQUksR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUM7b0JBQ3pGLE1BQU0sQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQztpQkFDakM7cUJBQU07b0JBQ0wscUJBQU0sTUFBTSxHQUFXLFVBQVUsQ0FBQyxJQUFJLENBQUM7b0JBQ3ZDLHFCQUFNLE9BQU8sR0FBVyxVQUFVLENBQUMsT0FBTyxDQUFDO29CQUMzQyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUUsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FBQztpQkFDcEQ7YUFDRjs7Ozs7UUFFTyx5Q0FBWTs7OztzQkFBQyxJQUFZO2dCQUMvQixxQkFBTSxTQUFTLEdBQUcsQ0FBQyxVQUFVLEVBQUUsT0FBTyxFQUFFLFVBQVUsRUFBRSxVQUFVLENBQUMsQ0FBQztnQkFDaEUsT0FBTyxTQUFTLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksR0FBRyxVQUFVLENBQUM7OztvQkFwRDNEQyxlQUFVOzs7Ozt3QkFMRkMseUJBQVk7d0JBRlpDLHFCQUFLOzs7aUNBRGQ7Ozs7Ozs7Ozs7Ozs7Ozs7OzsifQ==