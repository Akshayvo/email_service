<div class="reserve-unit-form">
        <!-- *ngIf="successMessage; else other_content"  -->
        <!-- *ngIf="strConfirmation; else other_content" -->
        <div [hidden]="" *ngIf="unitTypeNotAvailability" class="alert alert-danger alert-dismissible fade show">
                There is no Unit available, Please choose the other unit type or call the facility for more detail
                <button type="button" class="close" data-dismiss="alert" aria-label="Close" (click)="close()">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
    
        <!-- <div *ngIf="unitTypeNotAvailability">There is no Unit available, Please choose the other unit type or call the facility for more detail.</div> -->
    
        <app-pay-rent-form *ngIf="showPaymentPage"
        [showPaymentForMoveIn]="showPaymentForMoveIn"
        [showPaymentForReserve]="showPaymentForReserve"
        [ReservationFee]="ReservationFee"
        [ReservationFeeTax]="ReservationFeeTax"
        [TotalTaxAmount]="TotalTaxAmount"
        [TotalChargesAmount]="TotalChargesAmount"
        ></app-pay-rent-form>
        
        <div class="pb-4" *ngIf="strConfirmation || strAccessCode; else other_content">
        
        <div *ngIf="ReservationFee <= 0">
            Your reservation was successful.
            <div class="py-4">
                <table>
                    <tbody>
                        <tr>
                            <td class="td-1">Confirmation Number </td>
                            <td>
                                 <!-- <div class="loader" *ngIf="!strConfirmation && strAccessCode"></div> -->
                             {{strConfirmation || strAccessCode}}</td>
                         </tr>
                         <tr>
                             <td class="td-1">Unit Type</td>
                             <td>{{this.reserveUnitForm.value.lstUnitTypes[0].Description}} </td>
                         </tr>
                         <tr>
                             <td class="td-1">Rate</td>
                             <td> ${{this.reserveUnitForm.value.lstUnitTypes[0].MonthlyRate}}</td>
                         </tr> 
                         <tr *ngIf="!clickedMoveIn">
                             <td class="td-1">Move-In date</td>
                             <td>{{ this.reserveUnitForm.value.dteMoveIn }}</td>
                         </tr>
                     </tbody>
                </table>
            </div>
            <div>
                 <button *ngIf="tokenExit" (click)="signOut(logOut)" class="btn btn-primary">LogOff</button>
                 <div class="py-3 home-link"><a (click)="navigate('/')">Go to Home</a></div>
             </div>
        </div>
    </div>

    <ng-template #other_content>

        <form [formGroup]="reserveUnitForm" (ngSubmit)="onSubmit()" >
         <div *ngIf="count == 0" class="row justify-content">
             <div formGroupName="objTenant" class="col-lg-7 ">
                 <h2 class="pb-3">Tenant Data</h2>

                 <div class="row">
                   <div class="col-lg-6 form-group">
                           <label>First Name*</label>
                           <input type="text" formControlName="FirstName" class="form-control" placeholder="Enter First Name"
                           [value]=""
                           [ngClass]="{ 'is-invalid': submitted && f.objTenant.controls.FirstName.errors }"
                           />
                           <div *ngIf="submitted && f.objTenant.controls.FirstName.errors" class="invalid-feedback">
                               <small class="form-text text-muted" *ngIf="f.objTenant.controls.FirstName.errors.required">Please fill out this field</small>
                           </div>
                   </div>
                  <div class="col-lg-6 form-group">
                           <label>Last Name*</label>
                           <input type="text" formControlName="LastName" class="form-control" placeholder="Enter Last Name"
                           [ngClass]="{ 'is-invalid': submitted && f.objTenant.controls.LastName.errors }"/>
                           <div *ngIf="submitted && f.objTenant.controls.LastName.errors" class="invalid-feedback">
                               <small class="form-text text-muted" *ngIf="f.objTenant.controls.LastName.errors.required">Please fill out this field</small>
                           </div>
                   </div>
                </div>
                <div class="row">

                    <div class=" col-md-6 form-group">
                           <label>Phone Number*</label>
                           <input type="tel" formControlName="Phone" placeholder="Enter Phone Number" class="form-control"
                           [ngClass]="{ 'is-invalid': submitted && f.objTenant.controls.Phone.errors }" />
                           <div *ngIf="submitted && f.objTenant.controls.Phone.errors" class="invalid-feedback">
                               <small class="form-text text-muted" *ngIf="f.objTenant.controls.Phone.errors.required">Please fill out this field</small>
                           </div>
                           <div *ngIf="f.objTenant.controls.Phone.errors" >
                               <small class="form-text text-muted" *ngIf="f.objTenant.controls.Phone.errors.pattern">Please enter valid number</small>
                           </div>
                   </div>

                     <div class="col-md-6 form-group">
                             <label>Email Address*</label>
                             <input type="text" formControlName="EmailAddress" placeholder="Enter Email" class="form-control"
                             [ngClass]="{ 'is-invalid': submitted && f.objTenant.controls.EmailAddress.errors }" />
                             <div *ngIf="submitted && f.objTenant.controls.EmailAddress.errors" class="invalid-feedback">
                                 <small class="form-text text-muted" *ngIf="f.objTenant.controls.EmailAddress.errors.required">Please fill out this field</small>
                             </div>
                             <div *ngIf="f.objTenant.controls.EmailAddress.errors" >
                                 <small class="form-text text-muted" *ngIf="f.objTenant.controls.EmailAddress.errors.email">Please enter a valid email address</small>
                             </div>
                     </div>
                    </div>
                    <div class="row">
                     <div class="col-lg-12  form-group">
                               <label>Address Line 1*</label>
                               <input type="text" formControlName="AddressLine1" class="form-control" placeholder="Enter Address Line 1"
                               [ngClass]="{ 'is-invalid': submitted && f.objTenant.controls.AddressLine1.errors }"/>
                               <div *ngIf="submitted && f.objTenant.controls.AddressLine1.errors" class="invalid-feedback">
                                   <small class="form-text text-muted" *ngIf="f.objTenant.controls.AddressLine1.errors.required">Please fill out this field</small>
                               </div>
                       </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-12 form-group">
                            <label>Address Line 2</label>
                            <input type="text" formControlName="AddressLine2" class="form-control"
                            placeholder="Enter Address Line 2"
                            />
                    </div>
                    </div>
                   <div class="row">
                        <div class="col-lg-4 col-md-6 form-group">
                           <label>City*</label>
                           <input type="text" formControlName="City" class="form-control" placeholder="Enter City"
                           [ngClass]="{ 'is-invalid': submitted && f.objTenant.controls.City.errors }"/>
                           <div *ngIf="submitted && f.objTenant.controls.City.errors" class="invalid-feedback">
                               <small class="form-text text-muted" *ngIf="f.objTenant.controls.City.errors.required">Please fill out this field</small>
                           </div>
                       </div>
                <div class="col-lg-4 col-md-6 form-group ngx-select-dropdown">
                    <label>State*</label>
                    <select class="form-control" formControlName="State" [id]="option?.id"   [ngClass]="{ 'is-invalid': submitted && f.objTenant.controls.State.errors }">
                        <option value="" disabled  selected >Select your State</option>
                             <option *ngFor="let option of option"
                             [value]="option.id"
                             >
                             {{option.description}}
                             </option>
                       </select>


                    <div *ngIf="submitted && f.objTenant.controls.State.errors" class="invalid-feedback">
                        <small class="form-text text-muted" *ngIf="f.objTenant.controls.State.errors.required">Please fill out this field</small>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6 form-group">
                    <label>Zip Code*</label>
                    <input type="text" formControlName="ZIP" class="form-control" placeholder="Enter Zip Code"
                    [ngClass]="{ 'is-invalid': submitted && f.objTenant.controls.ZIP.errors }"
                    />
                    <div *ngIf="submitted && f.objTenant.controls.ZIP.errors" class="invalid-feedback">
                        <small class="form-text text-muted" *ngIf="f.objTenant.controls.ZIP.errors.required">Please fill out this field</small>
                    </div>
                </div>
                   </div>
                 </div>

                 <div class="col-lg-4">
                     <div formArrayName="lstUnitTypes">
                         <h2 class="pb-3">Unit</h2>
                         <i><strong *ngIf="showMoveInDateError">Please fill out the correct move in date.</strong></i>
                     <div *ngFor="let item of reserveUnitForm.controls.lstUnitTypes.controls; let i = index">
                         <div  [formGroupName]="i">
                             <div class="form-group">
                                 <label for="lstUnitTypes">Unit Type*</label>&nbsp;
                                 <select class="form-control" formControlName="Description" [id]="lstUnitTypes?.Description"
                                 (change)="selectChangeHandler($event)"
                                >
                                     <option *ngFor="let lstUnitTypes of lstUnitTypes"
                                     [value]="lstUnitTypes?.Description || DescriptionVR"

                                     >
                                     {{lstUnitTypes.Description}}
                                     </option>
                                    </select>
                                </div>
                                <!-- <div class="form-group readonly-form-control" >
                                    <label>Rate:</label>&nbsp; -->
                                    <!-- <input type="text" formControlName="MonthlyRate" class="form-control" [value]="MonthlyRateValue || MonthlyRateVR || defaultValue ||''"
                                    readonly> -->
                                 <!-- ${{MonthlyRateValue || MonthlyRateVR || defaultValue}}
                                </div>
                                <div class="form-group readonly-form-control">
                                    <label>Reservation Charges:</label>&nbsp; -->
                                    <!-- <input type="text" class="form-control" formControlName="ReservationFee" [value]="0.00" readonly> -->
                                    <!-- 0.00
                                </div> -->
                            </div>
                        </div>
                 </div>
                 <!-- *ngIf="proRateAmount === undefined" -->
                 <div class=" pb-5" >
                     <div class=" form-group custom-date-css" *ngIf="!clickedMoveIn">
                         <label>Move In Date*</label>&nbsp;
                         <mat-form-field class="example-full-width " class="form-control" placeholder="select your date" 
                         [ngClass]="{ 'is-invalid': submitted && f.dteMoveIn.errors }"
                         >
                            <input matInput [matDatepicker]="picker" formControlName="dteMoveIn"  [min]="From" [max]="To" readonly (click)="picker.open()">

                            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                            <mat-datepicker  [dateClass]="dateClass" #picker></mat-datepicker>

                          </mat-form-field>
                              <div *ngIf="submitted  && f.dteMoveIn.errors" class="invalid-feedback">
                                <small class="form-text text-muted" *ngIf="f.dteMoveIn.errors.required">Please fill out this field</small>
                            </div>
                         <!-- <input type="date" [min]="From" [max]="To"
                         class="form-control" [value]="currentDate" formControlName="dteMoveIn" [ngClass]="{ 'is-invalid': submitted && f.dteMoveIn.errors }" /> -->

                    </div>
                    <div class="pb-4" formArrayName="lstRentalPeriods">
                        <div *ngFor="let itemRental of reserveUnitForm.controls.lstUnitTypes.controls; let i = index">
                            <div  [formGroupName]="i">
                                <label for="PeriodDescription">Period*</label>&nbsp;
                                <select class="form-control" formControlName="PeriodDescription" [id]="LstRentalPeriods?.PeriodDescription">
                                    <option *ngFor="let LstRentalPeriods of LstRentalPeriods" [value]="LstRentalPeriods?.PeriodDescription" >
                                        {{LstRentalPeriods.PeriodDescription}}
                                    </option>
                                </select>

                            </div>
                        </div>
                    </div>
                    <!-- class="form-group readonly-form-control" -->
                    <div  >
                        <label>Rate:</label>&nbsp;
                        <!-- <input type="text" formControlName="MonthlyRate" class="form-control" [value]="MonthlyRateValue || MonthlyRateVR || defaultValue ||''"
                        readonly> -->
                     ${{MonthlyRateValue || MonthlyRateVR || defaultValue}}
                     <span *ngIf="RateTax > 0">
                         + ${{RateTax}} (Tax)
                     </span>
                    </div>
                    <div class="form-group readonly-form-control" *ngIf="proRateAmount === undefined && ReservationFee !== undefined">
                        <label>Reservation Charges:</label>&nbsp;
                        <!-- <input type="text" class="form-control" formControlName="ReservationFee" [value]="0.00" readonly> -->
                        ${{ ReservationFee}}
                        <span *ngIf="ReservationFeeTax !== undefined">
                                + ${{ReservationFeeTax }} (Tax)
                            </span>
                    </div>
                
                    <div  *ngIf="proRateAmount !== undefined">
                        <label>Prorate Amount:</label>&nbsp;
                        <!-- <input type="text" class="form-control" formControlName="ReservationFee" [value]="0.00" readonly> -->
                        ${{proRateAmount}} 
                        <span *ngIf="ProrateAmtTax > 0">
                                + ${{ProrateAmtTax}} (Tax)
                            </span>
                    </div>
                    <div  *ngIf="Deposit > 0">
                        <label>Deposit Amount:</label>&nbsp;
                        <!-- <input type="text" class="form-control" formControlName="ReservationFee" [value]="0.00" readonly> -->
                        ${{Deposit}}
                        <span *ngIf="DepositTax > 0.0">
                                + ${{DepositTax}} (Tax)
                            </span>
                    </div>
                    <div  *ngIf="OthDeposit > 0">
                        <label>Other Deposit:</label>&nbsp;
                        <!-- <input type="text" class="form-control" formControlName="ReservationFee" [value]="0.00" readonly> -->
                        ${{OthDeposit}}
                    </div>
                    <div  *ngIf="Setup > 0">
                        <label>Set Up:</label>&nbsp;
                        <!-- <input type="text" class="form-control" formControlName="ReservationFee" [value]="0.00" readonly> -->
                        ${{Setup}}
                        <span *ngIf="SetupTax > 0.0">
                                + ${{SetupTax}} (Tax)
                            </span>
                    </div>
                </div>
            </div>
         </div>
         <div [hidden]="" *ngIf="submitted && !this.reserveUnitForm.valid" class="alert alert-danger alert-dismissible fade show">
            Some fields were not filled out. Please complete the highlighted fields.
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>

<div *ngIf="showPaymentPage">showPaymentPage</div>

            <app-confirmation-data *ngIf="count == 1" 
            [RateTax]="RateTax"
            [reserveUnitForm]="reserveUnitForm" 
            [showConfirmation]="showConfirmation"
            [TotalTaxAmount]="TotalTaxAmount"
            [TotalChargesAmount]="TotalChargesAmount"
            [option]="option"
            [ReservationFee]="ReservationFee"
            [ReservationFeeTax]="ReservationFeeTax"
            [clickedMoveIn]="clickedMoveIn"
            [defaultTotalTaxAmount]="defaultTotalTaxAmount"
            [defaultTotalChargesAmount]="defaultTotalChargesAmount"
            ></app-confirmation-data>

            <div class="form-group text-right">
                <button type="button" class="btn btn-primary col-lg-3 col-md-4 col-sm-12" *ngIf="count === 0" (click)="handleClick()">Next</button>
                <button type="button" class="btn btn-primary col-lg-3 col-md-4 col-sm-12 my-2" *ngIf="count === 1" (click)="handlePrevious()">Previous</button>
                <button type="submit" class="btn btn-primary ml-lg-4 ml-md-2 ml-sm-auto col-lg-3 col-md-4 col-sm-12 " 
                *ngIf="count === 1 && !clickedMoveIn">Reserve</button>
                <!-- [disabled]="!!reservationInProgress" -->
                <button type="submit" class="btn btn-primary ml-lg-4 ml-md-2 ml-sm-auto col-lg-3 col-md-4 col-sm-12 "
                *ngIf="count === 1 && clickedMoveIn">Move In</button>
                <!-- [disabled]="!!reservationInProgress"  -->
            </div>
        </form>
    </ng-template>



</div>
